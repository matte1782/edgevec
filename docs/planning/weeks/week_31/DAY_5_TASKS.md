# Week 31 Day 5: Release Execution

**Date:** 2025-12-31
**Focus:** Publish v0.7.0 to crates.io, npm, and GitHub
**Estimated Duration:** 3 hours
**Priority:** P0 â€” Release day

---

## Prerequisites

Before starting Day 5:
- [ ] Day 4 HOSTILE_REVIEWER approval received
- [ ] All tests passing
- [ ] Bundle size verified
- [ ] CHANGELOG complete

---

## Tasks

### W31.5.1: Update Cargo.toml Version

**Duration:** 0.25 hours
**Agent:** RUST_ENGINEER

**File:** `Cargo.toml`

**Change:**
```toml
[package]
name = "edgevec"
version = "0.7.0"  # Was 0.6.0
```

**Verify:**
```bash
cargo check
cargo test --lib
```

**Acceptance Criteria:**
- [ ] Version updated to 0.7.0
- [ ] Cargo.toml compiles
- [ ] Tests still pass

---

### W31.5.2: Update pkg/package.json Version

**Duration:** 0.25 hours
**Agent:** WASM_SPECIALIST

**Note:** `pkg/package.json` is auto-generated by wasm-pack from Cargo.toml.

**Rebuild:**
```bash
wasm-pack build --release --target web --out-dir pkg
```

**Verify:**
```bash
cat pkg/package.json | grep version
# Should show: "version": "0.7.0"
```

**If Manual Update Needed:**
```json
{
  "name": "edgevec",
  "version": "0.7.0",
  ...
}
```

**Acceptance Criteria:**
- [ ] pkg/package.json shows 0.7.0
- [ ] All package files generated

---

### W31.5.3: Cargo Publish Dry Run

**Duration:** 0.5 hours
**Agent:** RUST_ENGINEER

**Commands:**

```bash
# Verify package contents
cargo package --list

# Dry run publish
cargo publish --dry-run
```

**Expected Output:**
- No errors
- Package size <10MB (crates.io limit)
- All required files included

**Check for Issues:**
- Missing README
- Invalid license
- Too large package
- Missing dependencies

**Acceptance Criteria:**
- [ ] Dry run succeeds
- [ ] Package size acceptable
- [ ] No missing files

---

### W31.5.4: Publish to crates.io

**Duration:** 0.5 hours
**Agent:** RUST_ENGINEER

**Commands:**

```bash
# Actual publish (requires authentication)
cargo publish
```

**Post-Publish Verification:**
```bash
# Wait 1-2 minutes for index update
cargo search edgevec

# Should show:
# edgevec = "0.7.0"
```

**If Publish Fails:**
1. Check error message
2. Verify crates.io token is valid
3. Check package size
4. Verify all dependencies are published

**Acceptance Criteria:**
- [ ] Publish succeeds
- [ ] `cargo search` shows 0.7.0
- [ ] crates.io page updated

---

### W31.5.5: Publish to npm

**Duration:** 0.5 hours
**Agent:** WASM_SPECIALIST

**Commands:**

```bash
# Navigate to pkg directory
cd pkg

# Verify package contents
npm pack --dry-run

# Publish
npm publish --access public
```

**Post-Publish Verification:**
```bash
npm info edgevec

# Should show version: 0.7.0
```

**If Publish Fails:**
1. Check npm authentication (`npm login`)
2. Verify package name availability
3. Check for conflicts with existing versions

**Acceptance Criteria:**
- [ ] npm publish succeeds
- [ ] `npm info` shows 0.7.0
- [ ] npmjs.com page updated

---

### W31.5.6: Create GitHub Release

**Duration:** 0.5 hours
**Agent:** RUST_ENGINEER

**Commands:**

```bash
# Create and push tag
git tag -a v0.7.0 -m "v0.7.0: SIMD Acceleration + First Community Contribution"
git push origin v0.7.0
```

**GitHub Release Notes Template:**

```markdown
# EdgeVec v0.7.0 â€” SIMD Acceleration

ðŸš€ **2x+ faster vector operations with WASM SIMD**

## ðŸŽ‰ First External Contribution!

This release includes our **first community contribution** from **@jsonMartin**:
- WASM SIMD128 Hamming distance with **8.75x speedup**
- AVX2 native implementation
- 10 comprehensive tests

Thank you for raising the bar! ðŸ™Œ

## Highlights

### Performance Improvements
| Metric | v0.6.0 | v0.7.0 | Improvement |
|:-------|:-------|:-------|:------------|
| Dot Product (768D) | ~500ns | ~200ns | 2.5x |
| L2 Distance (768D) | ~600ns | ~250ns | 2.4x |
| **Hamming Distance** | ~350ns | **~40ns** | **8.75x** |
| Search (10k, k=10) | ~2ms | ~1ms | 2x |

### Browser Support
- Chrome 91+ âœ…
- Firefox 89+ âœ…
- Safari 16.4+ (macOS) âœ…
- Edge 91+ âœ…
- iOS Safari (scalar fallback)

### New Features
- SIMD128 enabled by default for WASM
- Interactive Filter Playground with live sandbox
- Enhanced benchmark pages

## Installation

```bash
# Rust
cargo add edgevec

# npm
npm install edgevec@0.7.0
```

## Try It Live

- [Filter Playground](https://matte1782.github.io/edgevec/filter-playground.html)
- [SIMD Benchmark](https://matte1782.github.io/edgevec/simd_benchmark.html)

## Full Changelog

See [CHANGELOG.md](CHANGELOG.md) for complete details.
```

**Acceptance Criteria:**
- [ ] Tag created and pushed
- [ ] GitHub release created
- [ ] Release notes include @jsonMartin credit
- [ ] Installation instructions included

---

### W31.5.7: Verify All Releases

**Duration:** 0.5 hours
**Agent:** TEST_ENGINEER

**Verification Checklist:**

| Platform | Check | Expected |
|:---------|:------|:---------|
| crates.io | `cargo search edgevec` | 0.7.0 |
| crates.io | Visit page | Updated |
| npm | `npm info edgevec` | 0.7.0 |
| npm | Visit page | Updated |
| GitHub | Releases page | v0.7.0 tag |
| GitHub | Release notes | Complete |

**Test Fresh Install:**

```bash
# Create temp directory
mkdir /tmp/edgevec-test && cd /tmp/edgevec-test

# Test cargo
cargo new test-cargo && cd test-cargo
echo 'edgevec = "0.7.0"' >> Cargo.toml
cargo build

# Test npm
cd .. && mkdir test-npm && cd test-npm
npm init -y
npm install edgevec@0.7.0
```

**Acceptance Criteria:**
- [ ] All platforms show 0.7.0
- [ ] Fresh install works (cargo)
- [ ] Fresh install works (npm)
- [ ] Release notes visible

---

## Day 5 Exit Criteria

| Criterion | Verification | Status |
|:----------|:-------------|:-------|
| crates.io | Shows 0.7.0 | [ ] |
| npm | Shows 0.7.0 | [ ] |
| GitHub tag | v0.7.0 exists | [ ] |
| GitHub release | Notes published | [ ] |
| Fresh install | Works on cargo | [ ] |
| Fresh install | Works on npm | [ ] |
| @jsonMartin | Credited in release | [ ] |

---

## Rollback Plan

**If Critical Issues Found Post-Release:**

1. **Do NOT yank immediately** â€” assess severity
2. **If security issue:** Yank and announce
3. **If minor bug:** Document, fix in 0.7.1
4. **Yank commands (last resort):**
   ```bash
   cargo yank --version 0.7.0
   npm unpublish edgevec@0.7.0
   ```

---

**Day 5 Total:** 3 hours
**Agent:** RUST_ENGINEER, WASM_SPECIALIST, TEST_ENGINEER
